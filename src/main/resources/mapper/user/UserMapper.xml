<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.teamprojeect.mapper.user.UserMapper">
    <!--회원가입-->
    <insert id="join">
        INSERT INTO TBL_USER
        (USER_NUMBER, USER_ID, USER_PW, USER_NAME, USER_PHONE_NUMBER, USER_EMAIL)
        VALUES (SEQ_USER.NEXTVAL, #{userId}, #{userPw}, #{userName}, #{userPhoneNumber}, #{userEmail})
    </insert>

    <!--회원가입시 휴대폰 번호 조회 -> 있으면 ID 찾기 실행-->
    <select id="searchPhoneNumber" resultType="string">
        SELECT USER_PHONE_NUMBER
        FROM TBL_USER
        WHERE USER_PHONE_NUMBER = #{userPhoneNumber}
    </select>

    <!--회원가입시 아이디 조회 -> 있으면 ID 찾기 실행-->
    <select id="searchId" resultType="string">
        SELECT USER_ID
        FROM TBL_USER
        WHERE USER_ID = #{userId}
    </select>

    <!--로그인-->
    <select id="login">
        SELECT COUNT(*)
        FROM TBL_USER
        WHERE USER_ID = #{userId} AND USER_PW = #{userPw}
    </select>

    <!--정보 수정-->
    <update id="update">
        UPDATE TBL_USER
        SET USER_PW = #{userPw}, USER_NAME = #{userName}, USER_PHONE_NUMBER = #{userPhoneNumber}, USER_EMAIL = #{userEmail}, USER_ARTIST_STATUS = #{artistName}
        WHERE USER_NUMBER = #{userNumber}
    </update>

    <!--관리자에 의한 아티스트 계정 등록시 status값 변경-->
        <update id="updateArtist">
        UPDATE TBL_USER
        SET USER_ARTIST_STATUS = 4
        WHERE USER_NUMBER = #{userNumber}
    </update>

    <!--비밀번호 수정-->
    <update id="updatePw">
        UPDATE TBL_USER
        SET USER_PW = #{password}
        WHERE USER_NUMBER = #{userNumber}
    </update>

    <!--회원 탈퇴-->
    <update id="delete">
        UPDATE TBL_USER
        SET USER_STATUS = 0
        WHERE USER_NUMBER = #{userNumber}
    </update>

    <!--ID, PW 찾기-->
    <select id="find" resultType="userVO">

    </select>

</mapper>